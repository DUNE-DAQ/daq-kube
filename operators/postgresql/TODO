https://github.com/cloudnative-pg/cloudnative-pg

kubectl krew install cnpg
cpng operator ha mode?
backups?

set pg time to UTC
set pg lang/colate to??? C?

.spec.replicationSlots.highAvailability.enabled = true
apiVersion: postgresql.cnpg.io/v1
kind: Cluster
metadata:
  [...]
spec:
  backup:
    target: "prefer-standby" # ?

  # ...
  postgresql:
    parameters:
      auto_explain.log_min_duration: '10s'
      auto_explain.log_nested_statements: 'on'
      pg_stat_statements.track: all
  # ...

#
postgresql:
  parameters:
    pgaudit.log_catalog: "off"
    pgaudit.log_parameter: "on"
    pgaudit.log_relation: "on"
#

apiVersion: postgresql.cnpg.io/v1
kind: Cluster
metadata:
  name: separate-pgwal-volume
spec:
  instances: 3
  storage:
    size: 1Gi
  walStorage:
    size: 1Gi

https://cloudnative-pg.io/documentation/1.19/monitoring/#how-to-inspect-the-exported-metrics
apiVersion: monitoring.coreos.com/v1
kind: PodMonitor
metadata:
  name: cnpg-controller-manager
spec:
  selector:
    matchLabels:
      app.kubernetes.io/name: cloudnative-pg
  podMetricsEndpoints:
    - port: metrics

spec.monitoring.customQueriesConfigMap
---
apiVersion: v1
kind: ConfigMap
metadata:
  name: example-monitoring
  namespace: test
  labels:
    cnpg.io/reload: "true"
data:
  custom-queries: |
https://github.com/prometheus-community/postgres_exporter/blob/master/queries.yaml
