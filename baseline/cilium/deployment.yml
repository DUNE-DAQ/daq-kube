---
deployments:
  - path: cilium
    skipDeleteIfTags: true

  - barrier: true
    message: CNI needs to settle so we can allocate IP addresses

vars:
  - file: variables/cilium.yaml

# Don't replace certs on every run
# this list needs to be maintained by hand :(
# TODO: is this true, should these be excluded?
ignoreForDiff:
  - kind: Secret
    namespace: kube-system
    name: cilium-ca
    fieldPath: .data

  - kind: Secret
    namespace: kube-system
    name: hubble-ca-secret
    fieldPath: .data

  - kind: Secret
    namespace: kube-system
    name: hubble-relay-client-certs
    fieldPath: .data

  - kind: Secret
    namespace: kube-system
    name: hubble-server-certs
    fieldPath: .data
